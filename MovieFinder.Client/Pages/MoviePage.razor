@using Services
@using Models
@inject ITMDBService TMDB
@page "/movie/{id:int}/{slug}"

<PageTitle>@_movie.Title</PageTitle>

<MudPaper Class="d-flex justify-center backdrop-image"
		  Style=@($"background-image: url('{GetImageUrl(_movie.BackdropPath)}');") Elevation="0">
	<MudPaper Style="min-height: 100vh; opacity: 0.7;"
			  Elevation="16"
			  Class="mt-3 responsive-width">
	</MudPaper>
</MudPaper>

@code {
	[Parameter]
	public int Id { get; set; }
	[Parameter]
	public string Slug { get; set; }

	private MovieDetails _movie = new();

	protected override async Task OnInitializedAsync()
	{
		_movie = await TMDB.GetMovieDetailsAsync(Id);
	}

	private string GetImageUrl(string backdropPath)
	{
		return string.IsNullOrWhiteSpace(backdropPath)
		? ""
		: $"https://image.tmdb.org/t/p/original{backdropPath}";
	}

}
